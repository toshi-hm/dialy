# UI/UX設計

## 目次
- [1. デザインコンセプト](#1-デザインコンセプト)
- [2. 画面構成](#2-画面構成)
- [3. コンポーネント設計](#3-コンポーネント設計)
- [4. インタラクション設計](#4-インタラクション設計)
- [5. レスポンシブデザイン](#5-レスポンシブデザイン)
- [6. デザインシステム](#6-デザインシステム)
- [7. アクセシビリティ](#7-アクセシビリティ)
- [8. アニメーション・トランジション](#8-アニメーショントランジション)

## 1. デザインコンセプト

### 1.1 デザイン原則

1. **シンプルさ**: 最小限のUIで最大限の機能を提供
2. **直感的操作**: Dialを回すという物理的なメタファーで日付選択
3. **集中できる空間**: 日記を書くことに集中できるミニマルなデザイン
4. **過去とのつながり**: 過去の同じ日の日記を視覚的に配置

### 1.2 キーワード

- **ミニマル**: 装飾を排除したシンプルなデザイン
- **アナログ感**: Dialの回転という物理的な操作
- **タイムトラベル**: 過去の同じ日への旅
- **余白**: 書くことに集中できる空間

### 1.3 カラーコンセプト

- **ベース**: ホワイト・オフホワイト（書く空間の清潔感）
- **アクセント**: ダークブルー・ネイビー（信頼感、集中）
- **セカンダリ**: グレー系（テキストの階層構造）
- **ダークモード**: 将来的に対応（夜の日記書きに優しい）

## 2. 画面構成

### 2.1 トップページ（日記作成画面）

```
┌────────────────────────────────────────────────────────┐
│  Header                                                │
│  [Dialy]                                               │
└────────────────────────────────────────────────────────┘
┌──────────┬─────────────────────────────────────────────┐
│          │                                             │
│  ┌────┐  │          ◯月◯日（曜日）                     │
│  │Dial│  │                                             │
│  │ ○  │  │  ┌────────────────────────────────────┐   │
│  │    │  │  │                                    │   │
│  │    │  │  │  今日の日記を書く...                │   │
│  └────┘  │  │                                    │   │
│          │  │                                    │   │
│          │  │                                    │   │
│  [保存]  │  │                                    │   │
│          │  └────────────────────────────────────┘   │
│          │                                             │
│          │  過去の同じ日の日記                          │
│          │  ┌────────────────────────────────────┐   │
│          │  │ 2025年                             │   │
│          │  │ 1年前の今日は...（プレビュー）      │   │
│          │  │ 文字数: 500                         │   │
│          │  └────────────────────────────────────┘   │
│          │  ┌────────────────────────────────────┐   │
│          │  │ 2024年                             │   │
│          │  │ 2年前は...                          │   │
│          │  │ 文字数: 320                         │   │
│          │  └────────────────────────────────────┘   │
│          │                                             │
└──────────┴─────────────────────────────────────────────┘
```

### 2.2 レイアウト構造

#### デスクトップ（1024px以上）

- **左サイドバー**: Dial（固定幅: 150-200px）
- **メインエリア**: 日付表示 + 編集エリア + 過去の日記リスト（可変幅）
- **自動保存インジケーター**: テキストエリア下部に表示

#### タブレット（768px - 1023px）

- **左サイドバー**: Dial（縮小、幅: 150px）
- **メインエリア**: 日付表示 + 編集エリア + 過去の日記リスト
- **自動保存インジケーター**: テキストエリア下部に表示

#### モバイル（〜767px）

- **ヘッダー**: Dial（小型、左上配置） + 日付表示
- **メインエリア**: 編集エリア + 過去の日記リスト（全幅）
- **自動保存インジケーター**: テキストエリア下部に表示

### 2.3 ワイヤーフレーム詳細

#### デスクトップ版

```
┌─────────────────────────────────────────────────────────────┐
│ Header: [Dialy]                                [設定] [ログアウト] │
└─────────────────────────────────────────────────────────────┘
┌──────────────┬──────────────────────────────────────────────┐
│              │                                              │
│   Dial       │         ◯月◯日（曜日）                        │
│   ┌───────┐  │                                              │
│   │   ○   │  │  ┌─────────────────────────────────────┐   │
│   │       │  │  │ 今日の日記を書く...                  │   │
│   │       │  │  │                                     │   │
│   │   12  │  │  │                                     │   │
│   │       │  │  │                                     │   │
│   │ 9   3 │  │  │                                     │   │
│   │       │  │  │                                     │   │
│   │   6   │  │  │                                     │   │
│   └───────┘  │  └─────────────────────────────────────┘   │
│              │  文字数: 0 / 10,000                          │
│   ┌───────┐  │                                              │
│   │ 保存  │  │  ── 過去の同じ日の日記 ──                    │
│   └───────┘  │                                              │
│              │  ┌─────────────────────────────────────┐   │
│   自動保存中  │  │ 2025年                  [展開 ▼]    │   │
│   ●          │  │ 1年前の今日は新しいプロジェクトを...  │   │
│              │  │ 文字数: 500                          │   │
│              │  └─────────────────────────────────────┘   │
│              │  ┌─────────────────────────────────────┐   │
│              │  │ 2024年                  [展開 ▼]    │   │
│              │  │ 2年前は東京に旅行に行った。天気も...  │   │
│              │  │ 文字数: 320                          │   │
│              │  └─────────────────────────────────────┘   │
│              │  ┌─────────────────────────────────────┐   │
│              │  │ 2022年                  [展開 ▼]    │   │
│              │  │ 4年前は大学の卒業式だった。          │   │
│              │  │ 文字数: 180                          │   │
│              │  └─────────────────────────────────────┘   │
│              │                                              │
└──────────────┴──────────────────────────────────────────────┘
```

#### モバイル版

```
┌─────────────────────────────┐
│ [Dial ○]  ◯月◯日（曜日）      │
│                             │
└─────────────────────────────┘
┌─────────────────────────────┐
│ 今日の日記を書く...          │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
│                             │
└─────────────────────────────┘
文字数: 0 / 10,000

── 過去の同じ日の日記 ──

┌─────────────────────────────┐
│ 2025年          [展開 ▼]    │
│ 1年前の今日は新しいプロ...   │
│ 文字数: 500                  │
└─────────────────────────────┘
┌─────────────────────────────┐
│ 2024年          [展開 ▼]    │
│ 2年前は東京に旅行に行...     │
│ 文字数: 320                  │
└─────────────────────────────┘

                    ┌──────┐
                    │ 保存 │  (フローティング)
                    └──────┘
```

## 3. コンポーネント設計

### 3.1 Dial（日付選択Dial）

#### 仕様
- **サイズ**: デスクトップ 180x180px、モバイル 80x80px
- **主要操作**: クリック/タップでカレンダーダイアログ表示
- **補助操作**: ドラッグで前日/翌日に移動（連続回転で高速移動）
- **表示**: 12時計の文字盤風デザイン、中央に選択中の日（例: 8）
- **フィードバック**: 回転時にハプティックフィードバック（モバイル）

#### ビジュアル

```
デスクトップ版:
     12
    ┌───┐
  9 │ 8 │ 3  ← クリックでカレンダー表示
    └───┘      ドラッグで前後移動
     6

モバイル版（簡易）:
  ┌─┐
  │8│  ← タップでカレンダー
  └─┘
```

#### 操作フロー

**主要操作: カレンダーから日付選択**
1. **クリック/タップ**: Dialをクリック/タップ
2. **カレンダー表示**: カレンダーダイアログが表示される
3. **日付選択**: カレンダーから任意の日付を選択（過去5年以上も可能）
4. **日付確定**: 選択した日付が反映される

**補助操作: Dialで前後移動**
1. **ドラッグ開始**: Dialをマウスダウン/タッチ
2. **回転**: 時計回り = 翌日、反時計回り = 前日
3. **日付更新**: 回転方向に応じて1日ずつ移動
4. **連続回転**: 連続して回すことで高速スクロール可能
5. **ドラッグ終了**: マウスアップ/タッチ終了で確定

### 3.2 DateDisplay（日付表示）

#### 仕様
- **フォント**: 大きめ（デスクトップ 32px、モバイル 24px）
- **フォーマット**: ◯月◯日（曜日）
- **配置**: 中央揃え
- **カラー**: ダークカラー（視認性重視）

#### 例
```
2月8日（土）
```

### 3.3 DiaryEditor（日記編集エリア）

#### 仕様
- **タイプ**: テキストエリア（プレーンテキスト）
- **サイズ**:
  - デスクトップ: 幅100%、高さ400px
  - モバイル: 幅100%、高さ300px
- **プレースホルダー**: "今日の日記を書く..."
- **自動保存**: 入力停止後1秒で自動保存
- **フィードバック**:
  - 保存中: 「保存中...」表示
  - 保存完了: 「✓ 保存しました」表示（2秒後に非表示）

#### 視覚要素

```
┌──────────────────────────────┐
│ 今日の日記を書く...           │
│                              │
│ [カーソル点滅]                │
│                              │
│                              │
└──────────────────────────────┘
文字数: 0 / 10,000
```

### 3.4 PastEntriesList（過去の日記リスト）

#### 仕様
- **レイアウト**: 縦スタックレイアウト
- **ソート**: 新しい順（直近の年から）
- **表示数**: 過去5年分（最大5件）
- **展開**: デフォルトは折りたたみ、クリックで全文表示

#### DiaryPreviewカード

```
┌──────────────────────────────┐
│ 2025年              [展開 ▼] │
│ 1年前の今日は新しいプロジェクト...│
│ 文字数: 500                   │
└──────────────────────────────┘
```

展開時:

```
┌──────────────────────────────┐
│ 2025年              [閉じる ▲]│
│                              │
│ 1年前の今日は新しいプロジェクト │
│ を始めた。技術スタックはNext.js │
│ とReactで、とても楽しみだ。   │
│ （全文表示）                  │
│                              │
│ 文字数: 500                   │
└──────────────────────────────┘
```

### 3.5 保存状態インジケーター

自動保存の状態を視覚的にフィードバック。

#### デスクトップ版（テキストエリア下部）
```
保存中... ●
✓ 保存しました
```

#### モバイル版（テキストエリア下部）
```
保存中... ●
✓ 保存しました
```

#### 状態
- **保存中**: 「保存中... ●」とアニメーション
- **保存完了**: 「✓ 保存しました」表示（2秒後に非表示）
- **エラー**: 「⚠ 保存に失敗しました」表示

## 4. インタラクション設計

### 4.1 Dial操作インタラクション

#### 操作方法

1. **ドラッグ回転**:
   - Dialをクリック/タッチしてドラッグ
   - 回転方向: 時計回り = 未来方向、反時計回り = 過去方向
   - 回転速度: マウス移動速度に応じて変化

2. **クリック選択**（将来実装）:
   - Dialをクリックでカレンダーダイアログ表示
   - カレンダーから直接日付選択

#### フィードバック

- **視覚**: Dial回転アニメーション、日付表示の即座更新
- **聴覚**: 日付変更時に小さなクリック音（オプション）
- **触覚**: モバイルでハプティックフィードバック

### 4.2 日記編集インタラクション

#### 入力フロー

1. **フォーカス**: テキストエリアをクリックでフォーカス
2. **入力**: リアルタイムで文字数カウント更新
3. **自動保存**: 入力停止後1秒でデバウンス保存
4. **自動保存完了**: 「✓ 保存しました」の視覚的フィードバック

#### エラーハンドリング

- **文字数超過**: 10,000文字で入力停止、警告表示
- **保存失敗**: エラーメッセージ表示、再試行ボタン

### 4.3 過去の日記展開インタラクション

#### 展開・折りたたみ

1. **クリック**: DiaryPreviewカードをクリック
2. **アニメーション**: スライドダウン/アップで展開・折りたたみ
3. **展開状態**: 全文表示、「閉じる」ボタン表示

## 5. レスポンシブデザイン

### 5.1 ブレークポイント

| デバイス | 幅 | レイアウト |
|---------|---|----------|
| モバイル | 〜767px | 1カラム、Dialは小型 |
| タブレット | 768px〜1023px | 2カラム、Dial中型 |
| デスクトップ | 1024px〜 | 2カラム、Dial大型 |

### 5.2 レスポンシブ対応詳細

#### モバイル（〜767px）

- **Dial**: 80x80px、ヘッダーに配置
- **日付表示**: ヘッダーに横並び
- **編集エリア**: 全幅、高さ300px
- **過去の日記**: 全幅、カード形式
- **保存ボタン**: フローティングボタン（右下）

#### タブレット（768px〜1023px）

- **Dial**: 150x150px、左サイドバー
- **日付表示**: メインエリア上部
- **編集エリア**: メインエリア、高さ350px
- **過去の日記**: メインエリア、カード形式
- **保存ボタン**: フローティングボタン（右下）

#### デスクトップ（1024px〜）

- **Dial**: 180x180px、左サイドバー
- **日付表示**: メインエリア上部
- **編集エリア**: メインエリア、高さ400px
- **過去の日記**: メインエリア、カード形式
- **自動保存インジケーター**: テキストエリア下部

## 6. デザインシステム

### 6.1 カラーパレット

#### プライマリカラー

```
Blue 600: #2563EB (メインアクション)
Blue 700: #1D4ED8 (ホバー)
Blue 50:  #EFF6FF (背景)
```

#### セカンダリカラー

```
Gray 900: #111827 (テキスト)
Gray 600: #4B5563 (サブテキスト)
Gray 300: #D1D5DB (ボーダー)
Gray 100: #F3F4F6 (背景)
```

#### システムカラー

```
Green 600: #16A34A (成功)
Red 600:   #DC2626 (エラー)
Yellow 600: #CA8A04 (警告)
```

### 6.2 タイポグラフィ

#### フォントファミリー

```css
font-family:
  'Hiragino Kaku Gothic ProN',
  'Yu Gothic',
  'Meiryo',
  sans-serif;
```

#### フォントサイズ

| 用途 | サイズ | 行間 |
|------|------|------|
| 日付表示 | 32px (2rem) | 1.2 |
| 見出し | 24px (1.5rem) | 1.3 |
| 本文 | 16px (1rem) | 1.6 |
| キャプション | 14px (0.875rem) | 1.4 |
| 小文字 | 12px (0.75rem) | 1.3 |

#### フォントウェイト

```
Regular: 400 (本文)
Medium:  500 (サブテキスト)
Bold:    700 (見出し)
```

### 6.3 スペーシング

Tailwind CSSのスペーシングスケールを使用:

```
4px  (1)  - 最小マージン
8px  (2)  - 小マージン
16px (4)  - 標準マージン
24px (6)  - 中マージン
32px (8)  - 大マージン
48px (12) - 特大マージン
```

### 6.4 シャドウ

```css
/* カード */
box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);

/* ホバー時 */
box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);

/* フローティングボタン */
box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
```

### 6.5 ボーダー半径

```
Dial: rounded-full (50%)
ボタン: rounded-lg (8px)
カード: rounded-md (6px)
入力: rounded-md (6px)
```

## 7. アクセシビリティ

### 7.1 キーボード操作

| 操作 | ショートカット |
|------|--------------|
| テキストエリアフォーカス | Tab |
| 保存 | Ctrl/Cmd + S |
| Dial回転（将来） | 矢印キー（上下） |
| 過去の日記展開 | Enter / Space |

### 7.2 ARIA属性

```html
<!-- Dial -->
<div
  role="slider"
  aria-label="日付選択"
  aria-valuemin="0"
  aria-valuemax="365"
  aria-valuenow="39"
  aria-valuetext="2月8日"
>

<!-- DiaryEditor -->
<textarea
  aria-label="日記本文"
  aria-required="false"
  aria-invalid="false"
>

<!-- SaveButton -->
<button
  aria-label="日記を保存"
  aria-busy={isSaving}
>
```

### 7.3 カラーコントラスト

WCAG 2.1 レベルAA準拠:

- 通常テキスト: 4.5:1以上
- 大きなテキスト: 3:1以上

### 7.4 スクリーンリーダー対応

- すべてのインタラクティブ要素に適切なラベル
- 状態変化（保存中、保存完了）をaria-liveで通知
- 過去の日記リストは適切な見出し構造

## 8. アニメーション・トランジション

### 8.1 Dial回転アニメーション

```css
transition: transform 0.1s ease-out;
```

- **イージング**: ease-out（自然な減速）
- **時間**: 100ms（即座に反応）

### 8.2 日記カード展開アニメーション

```css
transition: max-height 0.3s ease-in-out;
```

- **イージング**: ease-in-out（スムーズな展開）
- **時間**: 300ms

### 8.3 保存フィードバックアニメーション

```css
/* 保存ボタンの状態変化 */
transition: background-color 0.2s ease;

/* チェックマークアニメーション */
@keyframes checkmark {
  0%   { transform: scale(0); }
  50%  { transform: scale(1.2); }
  100% { transform: scale(1); }
}
```

### 8.4 フェードイン・フェードアウト

```css
/* ページ遷移 */
transition: opacity 0.2s ease-in-out;
```

### 8.5 モーション削減設定への対応

```css
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

## 9. エラー状態のUI

### 9.1 保存失敗

```
┌──────────────────────────────┐
│ ⚠ 保存に失敗しました           │
│ ネットワーク接続を確認して      │
│ 再度お試しください。           │
│                              │
│ [再試行]  [キャンセル]         │
└──────────────────────────────┘
```

### 9.2 文字数超過

```
テキストエリア下部:
⚠ 文字数が上限（10,000文字）を超えています
```

### 9.3 未来の日付選択（エラー）

```
⚠ 未来の日付は選択できません
```

## 10. ローディング状態のUI

### 10.1 初回読み込み

```
┌──────────────────────────────┐
│                              │
│        ローディング中...       │
│        ●●●○○                 │
│                              │
└──────────────────────────────┘
```

### 10.2 自動保存中

```
左サイドバー:
自動保存中 ●
```

### 10.3 過去の日記読み込み中

```
── 過去の同じ日の日記 ──

読み込み中...
●●●○○
```

## まとめ

- **デザインコンセプト**: ミニマル、直感的、集中できる空間
- **主要コンポーネント**: Dial、DiaryEditor、PastEntriesList
- **レスポンシブ**: モバイル、タブレット、デスクトップに対応
- **アクセシビリティ**: WCAG 2.1 レベルAA準拠
- **アニメーション**: 控えめで自然なトランジション
